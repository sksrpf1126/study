# **_HTTP Method_**

해당 글은 **_김영한님의 모든 개발자를 위한 HTTP 웹 기본 지식 및 여러 참고 글_** 들을 읽고, 정리한 내용이다.

</br>

HTTP 메서드는 클라이언트가 서버에게 요청을 할 때에 요청에 대한 목적이나 종류를 알리는 수단을 의미한다.  
http - 0.9 버전까지는 GET 메서드만 존재하였지만, 현재는 여러 메서드가 등장하였음.

</br>

---

## **_URI 설계방법_**

http 메서드를 보기에 앞서 URI 설계에 대해 생각을 해보자.

URI를 설계할 때에는 **_리소스_** 를 중심으로 설계를 해야한다.  
여기서 리소스란, 자원을 의미하며 행위를 포함하지 않는다. 예를 들어 "미네랄을 캐라" 라는 행위를 해야한다면, 여기서 리소스는 미네랄에 해당하는 것이다.

그렇다면, 회원 목록 조회, 회원 조회, 등록, 수정, 삭제에 대한 URI를 작성해야한다면 어떻게 하겠는가?

```
/members -> 회원 목록 조회
/read-member-by-id -> 회원 조회
/create-member -> 회원 등록  등
```

해당 방식으로 URI를 설계할 것인가? URI를 보고 어떠한 동작을 행하는지는 알 수 있곘지만, 좋은 설계는 리소스를 식별하고 행위는 **_HTTP method_** 로 구분짓는 것이다.  
그렇다고 무작정 지키는 것은 아니다!  
해당 방식으로 전부 URI 설계가 이루어질리는 없기 때문에 애매하면 동사를 섞는 방식도 괜찮다.  
ex) members/{id}/update

```
/members -> 회원 목록 조회
/meebers/{id} -> 회원 조회 (어떻게 구분?)
/meebers/{id} -> 회원 등록 (어떻게 구분?)
/meebers/{id} -> 회원 수정 (어떻게 구분?)
/meebers/{id} -> 회원 삭제 (어떻게 구분?)
```

위처럼 리소스로 URI를 설계하고 행위를 구분짓는 것을 HTTP Method로 하는 것이다.

그럼 어떤 행위에 어떤 http 메서드를 사용해야 하는지를 알아보자.

</br>

---

## **_HTTP 메서드에 대해_**

**_핵심 메서드_**

- GET : 리소스 **_조회_**
- POST : 요청 데이터(리소스) 처리 or 등록
- PUT : 리소스를 대체, 해당 리소스가 없다면 생성
- PATCH : 리소스 일부 변경
- DELETE : 리소스 삭제

**_이외의 메서드_**

- HEAD : GET과 동일하지만 body부분을 빼고 상태 줄과 헤더 내용만 반환
- OPTIONS : 대상 리소스에 대한 통신 가능 옵션을 설명 (주로 CORS에서 사용)
- CONNECT : 대상 자원으로 식별되는 서버에 대한 터널을 설정 (거의 사용안함)
- TRACE : 대상 리소스에 대한 경로를 따라 메시지 루프백 테스트를 수행 (거의 사용안함)

여기서 필수적으로 알아야 하는 메서드들은 핵심 메서드이다.

### **_GET Method_**

- 리소스를 조회
- 서버에 전달하고 싶은 데이터는 보통 쿼리 스트링을 통해서 전달한다.
- http body를 통해서 데이터 전달이 가능해졌지만, 지원하지 않는 곳이 많아서 추천 X

### **_POST Method_**

- 클라이언트가 보낸 데이터를 서버가 처리할 때 보통 사용
- 메시지 바디를 통해서 데이터를 전달
- 다른 메서드로 처리하기 애매한 경우에도 POST를 사용하기도 한다.

## **_GET vs POST_**

GET 요청은 브라우저에 기록이 되며, 길이 제한(URI를 통해 데이터를 전달하기 때문)이 존재하며, 또한 보안에도 좋지 않다.(URI에 쿼리스트링으로 그대로 요청을 하기 때문)

그렇기 때문에 리소스를 조회하는 역할 정도로만 사용하는게 적합하다.

POST 요청은 브라우저에 기록이 남지 않고, HTTP body를 통해 데이터를 전달하기 때문에 길이 제한이 없으며, Get보다는 보안이 좋다.(암호화 하지 않으면 결국 볼 수 있는건 동일)

GET은 멱등이지만, POST는 멱등이 아니다.

멱등이란 같은 요청을 해서 같은 결과가 나타나는 것을 의미한다.(결과가 바뀌지 않음)

그렇기에 단순 조회하는 GET 메서드의 경우 여러번 같은 요청을 한다해도 똑같은 것을 조회할 뿐이다. (데이터 변화 X)

POST는 그에 비해 클라이언트가 보낸 데이터를 처리하는 역할을 보통 수행한다. 예를 들어 회원을 등록하는 경우라면 여러번 호출할 경우 여러 회워이 등록이 될 수 있을 것이며, 주문에 대한 결제의 경우(값을 지불하고 이후 다음 프로세스 진행(상태변경))에도 POST를 사용하며, 그럼 여러 번의 결제가 진행될 수 있다는 것이다.

</br>

### **_PUT Method_**

- 리소스를 대체하기 위한 http 메서드이다.
- "대체"라는 거에 주의해야 한다. 예를 들어 특정 데이터 중에서 일부 필드만 업데이트 할려고 해당 필드의 데이터만 전송했을 때, 해당 업데이트된 필드 이외에 다른 모든 필드들(데이터들)은 전부 날라가버린다.

### **_PATCH Method_**

- 리소스를 부분 변경(업데이트)
- 특정 서버에서 PATCH Method를 지원 안하는 경우가 있다. 이럴 땐 POST를 사용하면 된다.

### **_DELETE Method_**

- 리소스를 제거할 때 사용
